C51 COMPILER V9.60.7.0   MAIN                                                              04/25/2024 20:50:39 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Program\MDK51_32\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Timer0.h"
   4          
   5          // å®šä¹‰èœ‚é¸£å™¨ç«¯å£ä½
   6          sbit Buzzer=P2^5;
   7          
   8          // å®šä¹‰å®æ’­æ”¾é€Ÿåº¦ï¼Œå€¼ä¸ºå››åˆ†éŸ³ç¬¦çš„æ—¶é•¿(ms)
   9          #define SPEED   500
  10          
  11          // å®šä¹‰é‡è£…è½½å€¼æ•°ç»„
  12          unsigned int code ReloadValues[]={
  13              // ç´¢å¼•æ˜¯ä»1å¼€å§‹çš„ï¼Œè¿™é‡Œç©ºå‡ºä¸€ä½
  14              0,
  15              // ä½éŸ³
  16              63618,63721,63825,63918,64011,64093,64175,64250,64321,64390,64453,64514,
  17              // ä¸­éŸ³
  18              64570,64623,64674,64722,64767,64810,64850,64888,64924,64958,64990,65020,
  19              // é«˜éŸ³
  20              65048,65075,65100,65124,65147,65168,65188,65207,65225,65242,65258,65273
  21          };
  22          
  23          // å®šä¹‰å°æ˜Ÿæ˜Ÿæ•°ç»„
  24          // code ä»£è¡¨çš„æ˜¯ æŠŠå®šä¹‰çš„æ•°æ®è¡¨å­˜å‚¨åˆ° flash å­˜å‚¨å™¨ä¸­ï¼Œå¦åˆ™å­˜å‚¨åˆ° RAM ä¸­
  25          // 51å•ç‰‡æœºçš„ RAM é€šå¸¸éƒ½æ¯”è¾ƒå°ï¼Œ1k å·¦å³ï¼Œå¯¹äºå°é‡çš„æ•°æ®æ˜¯å¯ä»¥å­˜å‚¨åˆ°RAMä¸­ï¼Œå¦‚
             -æœæ˜¯å£°éŸ³æ–‡ä»¶ç­‰å¤§æ•°æ®éœ€è¦å­˜å‚¨åˆ° FLASH å­˜å‚¨å™¨ä¸­
  26          unsigned char code TwinkleTwinkleLittleStar[]={
  27              // ä¸€é—ªä¸€é—ªäº®æ™¶æ™¶
  28              13,4,
  29              13,4,
  30              20,4,
  31              20,4,
  32              22,4,
  33              22,4,
  34              20,4+4,
  35              // æ»¡å¤©éƒ½æ˜¯å°æ˜Ÿæ˜Ÿ
  36              18,4,
  37              18,4,
  38              16,4,
  39              16,4,
  40              15,4,
  41              15,4,
  42              13,4+4,
  43              // ç»ˆæ­¢ç¬¦æµ‹è¯•
  44              0,4,
  45              // æŒ‚åœ¨å¤©ä¸Šæ”¾å…‰æ˜
  46              20,4,
  47              20,4,
  48              18,4,
  49              18,4,
  50              16,4,
  51              16,4,
  52              15,4+4,
  53              // å¥½åƒè®¸å¤šå°çœ¼ç›
C51 COMPILER V9.60.7.0   MAIN                                                              04/25/2024 20:50:39 PAGE 2   

  54              20,4,
  55              20,4,
  56              18,4,
  57              18,4,
  58              16,4,
  59              16,4,
  60              15,4+4,
  61              // ç»“æŸæ ‡è®°
  62              0xFF
  63          };
  64          
  65          // å®šä¹‰æ•°ç»„ç´¢å¼•ç­‰
  66          unsigned char ReloadValues_Index, TwinkleTwinkleLittleStar_Index, DurationBasics;
  67          
  68          void main()
  69          {
  70   1          Timer0_Init();
  71   1          while(1)
  72   1          {
  73   2              if (ReloadValues_Index != 0xFF)
  74   2              {
  75   3                  // é€‰æ‹©éŸ³ç¬¦å¯¹åº”çš„é¢‘ç‡
  76   3                  ReloadValues_Index = TwinkleTwinkleLittleStar[TwinkleTwinkleLittleStar_Index];  // é‡è½½å€¼ç´
             -¢å¼•
  77   3                  TwinkleTwinkleLittleStar_Index++;
  78   3                  // é€‰æ‹©éŸ³ç¬¦å¯¹åº”çš„æ—¶å€¼
  79   3                  DurationBasics = TwinkleTwinkleLittleStar[TwinkleTwinkleLittleStar_Index];      // æ—¶é•¿åŸºæ•
             -°
  80   3                  TwinkleTwinkleLittleStar_Index++;
  81   3                  Delay(SPEED / 4 * DurationBasics);
  82   3                  
  83   3                  // éŸ³ç¬¦é—´çŸ­æš‚åœé¡¿
  84   3                  TR0 = 0;
  85   3                  Delay(5);
  86   3                  TR0 = 1;
  87   3              }
  88   2              else
  89   2              {
  90   3                  TR0 = 0;
  91   3                  while(1);
  92   3              }
  93   2          }
  94   1      }
  95          
  96          /**
  97            * @brief å®šæ—¶å™¨0ç»ˆç«¯æ‰§è¡Œç¨‹åº
  98            * @param  æ— 
  99            * @retval æ— 
 100            */
 101          void Timer0_Routine() interrupt 1
 102          {
 103   1          unsigned int ReloadValue = ReloadValues[ReloadValues_Index];
 104   1          
 105   1          // å¦‚æœä¸æ˜¯ä¼‘æ­¢ç¬¦
 106   1          if (ReloadValue)
 107   1          {
 108   2              TL0 = ReloadValue%256;
 109   2              TH0 = ReloadValue/256;
 110   2              
 111   2              // ç¿»è½¬èœ‚é¸£å™¨IOå£
 112   2              Buzzer=!Buzzer;
 113   2          }
C51 COMPILER V9.60.7.0   MAIN                                                              04/25/2024 20:50:39 PAGE 3   

 114   1          
 115   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    115    ----
   CONSTANT SIZE    =    133    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
